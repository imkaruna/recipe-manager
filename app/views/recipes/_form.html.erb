<%= form_for @recipe, html: { multipart: true } do |f| %>
    <%= f.label :name %><br>
    <%= f.text_field :name %><br><br>
    <%= f.label :description %><br>
    <%= f.text_area :description, rows: 4 %><br><br>
    <%= f.label :recipe_image %>
    <%= f.file_field :recipe_image %>
    <% if @recipe.ingredients.exists? %>
        <h3>Current Ingredients</h3>
            <% @recipe_ingredients.each do |recipe_ingredient| %>
            <%= recipe_ingredient.values[0][0] %>
            <%= recipe_ingredient.values[0][1] %>
            <%= link_to 'Edit', edit_recipe_ingredient_path(@recipe.id, recipe_ingredient.keys[0]) %><br/>
        <% end %>
    <% end %>
    <h2>Add Ingredient</h2>
    <% Ingredient.all.each_with_index do |ingredient,index| %>
        <% if @recipe.ingredients.exclude?(ingredient) %>
            <%= label_tag "ingredient_#{ingredient.id}", ingredient.name %>
            <%= check_box_tag "recipe[ingredients_attributes][#{index}][id]", ingredient.id, false, id: "ingredient_#{ingredient.id}" %>
            <%= label_tag "ingredient_#{ingredient.id}_quantity", "Quantity" %>
            <%= text_field_tag "recipe[ingredients_attributes][#{index}][quantity]", " ", id: "recipe_ingredient_quantity_#{ingredient.id}"%><br>
        <% end %>
    <% end %><br>
    <p>
      <%= f.submit %>
    </p>
<% end %>
